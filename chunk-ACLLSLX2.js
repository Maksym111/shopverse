import{Ac as q,Bc as z,Ca as D,Cc as J,Da as M,Db as A,Ea as l,Fa as a,Ga as o,H as x,Ha as b,L as F,P as I,Pa as _,Ra as S,Ta as p,Vb as B,W as u,X as g,Y as N,Z as V,Za as d,bb as O,ca as v,f as y,fb as $,gb as j,hb as T,ia as s,jc as G,la as c,mb as R,na as E,nb as L,o as w,sb as h,xa as f,xc as H,yb as k,za as P}from"./chunk-DHM5S5H7.js";var m=class i{sortFuncs={"asc-title":(e,t)=>e.title.localeCompare(t.title),"desc-title":(e,t)=>t.title.localeCompare(e.title),"asc-price":(e,t)=>e.price-t.price,"desc-price":(e,t)=>t.price-e.price};sortProducts(e,t){let r=this.sortFuncs[t];return r?e.pipe(w(n=>[...n].sort(r))):e}static \u0275fac=function(t){return new(t||i)};static \u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})};var X=(i,e)=>e.id;function Y(i,e){if(i&1&&(a(0,"li"),b(1,"app-card-product",11),o()),i&2){let t=e.$implicit;s(),l("product",t)}}function Z(i,e){if(i&1&&(a(0,"ul",8),D(1,Y,2,1,"li",null,X),o()),i&2){p();let t=T(0);s(),M(t)}}function ee(i,e){i&1&&(a(0,"h3",9),d(1,"No favorite products yet..."),o())}function te(i,e){if(i&1){let t=_();a(0,"app-pagination",12),S("pageEmmiter",function(n){u(t);let C=p();return g(C.setPage(n))}),o()}if(i&2){let t=p();l("currentPage",t.pageProduct())("count",t.paginationCount())}}var K=class i{constructor(e,t,r){this.scroller=e;this.store=t;this.sortService=r}limitPerPage=12;initialProducts$;products$;currentRange=h(()=>{let e=this.pageProduct(),t=this.totalProductsNumb();return{firstItem:t?(e-1)*this.limitPerPage+1:0,lastItem:Math.min(e*this.limitPerPage,t)}});sortSubject=new y("not-selected");sort$=this.sortSubject.asObservable();selectSort=[{label:"Not selected",value:"not-selected",selected:!0},{label:"Ascending title",value:"asc-title",selected:!1},{label:"Descending title",value:"desc-title",selected:!1},{label:"Ascending price",value:"asc-price",selected:!1},{label:"Descending price",value:"desc-price",selected:!1}];pageProduct=v(1);totalProductsNumb=v(0);paginationCount=h(()=>Math.ceil(this.totalProductsNumb()/this.limitPerPage));ngOnInit(){let e=this.store.select(H).pipe(F(t=>this.totalProductsNumb.set(t.length)),x(1));this.initialProducts$=e,this.products$=e}setSort(e){this.pageProduct.set(1),this.products$=this.sortService.sortProducts(this.initialProducts$,e),this.sortSubject.next(e)}setPage(e){this.pageProduct.set(e),this.scroller.scrollToPosition([0,0])}static \u0275fac=function(t){return new(t||i)(c(A),c(G),c(m))};static \u0275cmp=E({type:i,selectors:[["app-favorites-page"]],decls:16,vars:9,consts:[[1,"container"],[1,"result-info","mb24"],[1,"result-count"],[1,"select-wrapper"],[1,"select-container"],[1,"select-title"],["icon","arrow",1,"select-arrow"],[3,"selectedValue","values"],[1,"list","card-list","mb64"],[1,"h3","mb32"],[3,"currentPage","count"],[3,"product"],[3,"pageEmmiter","currentPage","count"]],template:function(t,r){if(t&1){let n=_();$(0),R(1,"async"),a(2,"div",0)(3,"main")(4,"div",1)(5,"p",2),d(6),o(),a(7,"div",3)(8,"div",4)(9,"p",5),d(10,"Sort by"),o(),N(),b(11,"svg",6),V(),a(12,"app-select",7),S("selectedValue",function(Q){return u(n),g(r.setSort(Q))}),o()()()(),f(13,Z,3,0,"ul",8)(14,ee,2,0,"h3",9),o(),f(15,te,1,2,"app-pagination",10),o()}if(t&2){let n=j(L(1,6,r.products$));s(6),O(" Showing ",r.currentRange().firstItem,"-",r.currentRange().lastItem," of ",r.totalProductsNumb()," results. "),s(6),l("values",r.selectSort),s(),P(n!=null&&n.length?13:14),s(2),P(r.paginationCount()>1?15:-1)}},dependencies:[J,q,z,B,k],styles:[".result-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:32px}"],changeDetection:0})};export{K as FavoritesPage};
