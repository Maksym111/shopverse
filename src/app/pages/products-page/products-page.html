@let filters = (filters$ | async); @let searchQuery = (searchQuery$ | async);

<div class="container">
  <div class="main-wrap">
    <app-filters (filtersEmitted)="setFilters($event)"></app-filters>

    <div class="search-wrapper">
      @if (filters?.category?.length) {
      <div class="applied-filters-wrapper mb24">
        <p class="search-sub-title mb12">Applied Filters:</p>

        <ul class="list applied-filters">
          @for(category of filters?.category; track category.id){
          <li class="applied-filters-item">
            <span class="applied-filters-text">{{category.value}}</span>
          </li>
          }
        </ul>
      </div>
      }

      <div class="result-info-wrapper mb24">
        <p class="result-count">
          Showing {{ currentRange().firstItem }}-{{ currentRange().lastItem }}
          of {{ totalProductsNumb() }} results @if(searchQuery){
          <ng-container>
            for
            <span class="searched-word"> "{{ searchQuery }}" </span>
          </ng-container>
          }
        </p>

        <div class="select-wrapper">
          <div class="select-container">
            <p class="select-title">Sort by</p>
            <svg icon="arrow" class="select-arrow"></svg>
            <app-select [values]="selectSort" (selectedValue)="setSort($event)"></app-select>
          </div>
        </div>
      </div>

      <ul class="list product-list mb64">
        @for(product of (products$ | async); track product.id) {
        <li>
          <app-card-product [product]="product"></app-card-product>
        </li>
        }
      </ul>
    </div>
  </div>

  @if(paginationCount() > 1 && !haveFilters){
  <app-pagination [currentPage]="pageProduct()" [count]="paginationCount()"
    (pageEmmiter)="setPage($event)"></app-pagination>
  }
</div>
